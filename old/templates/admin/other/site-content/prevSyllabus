<div id="wrapper" ng-init="init()" syllabus>
    <div class="animate-panel">

        <div class="content">
            <div class="row">
                <div class="col-md-8 animated-panel fadeInDown"
                     style="animation-delay: 0.2s; -webkit-animation-delay: 0.2s;">
                    <div class="hpanel hbgblue">
                        <div class="panel-body">
                            <div class="row">
                                <div class="col-md-3 border-right animated-panel zoomIn"
                                     style="animation-delay: 0.3s; -webkit-animation-delay: 0.3s;">
                                    <i class="pe-7s-display1 fa-5x" style="font-size:11em;"></i>
                                </div>
                                <div class="col-md-8 col-md-offset-1 animated-panel zoomIn"
                                     style="animation-delay: 0.4s; -webkit-animation-delay: 0.4s;">
                                    <div class="text-center m-b-md">
                                        <h3>Course Content</h3>

                                        <p>Create and arrange lessons & modules below to piece together a good syllabus for your customers</p>

                                        <div class="input-group closest_component course_title_area"
                                             data-component="site_options" style="margin-top:20px;">
                                            <span class="input-group-addon">
                                                Course Title:
                                            </span>

                                            <a class="editable editable-click form-control"
                                               e-placeholder="Enter Course Title" editable-text="options.course_title"
                                               onaftersave="updateCourseTitle(options.course_title)">{{ options.course_title || 'No title yet' }}</a>

                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>

                    </div>
                </div>
                <div class="col-md-4 animated-panel zoomIn" style="animation-delay: 0.3s; -webkit-animation-delay: 0.3s;">
                    <div class="hpanel">
                        <div class="panel-body" style="text-align: center;">
                            <button type="button" class="btn btn-lg btn-brand add_module" style="padding: 15px 48px 18px;font-size: 20px;  margin: 36px 0px;" ng-click="addModule(module)">Add New Module</button>
                            <button type="button" class="btn btn-lg btn-brand save_course" style="padding: 15px 48px 18px;font-size: 20px;  margin: 0px 0px 36px;" ng-click="saveSyllabus()">Save Changes</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-12 module_parent" style="line-height: 200%;word-spacing: 5px;">

                    <div data-as-sortable="dragModuleControlListeners" data-ng-model="modules" style="min-height:20px" id='12'>
                        <div style="border-width:0px;" data-ng-repeat="module in modules" data-as-sortable-item>
                        <div class="module_item" data-component="module" data-id="{{module.id}}">
                            <div style="min-height:40px" class="col-md-12" data-as-sortable-item-handle>
                                <div class="pull-right">
                                    <a class="btn btn-brand btn-xs add_lesson" data-bypass="true"
                                       ng-click="addLesson(module.id)">add lesson</a>
                                    <a class="delete_module" data-bypass="true" ng-click="deleteModule(module.id)">
                                        <span class="fa fa-trash"></span>
                                    </a>
                                </div>
                                <h4>
                                <a e-placeholder="Enter Module Name" editable-text="module.title"
                                   onaftersave="updateModule(module)">{{ module.title || 'Empty'}}</a>
                                </h4>
                            </div>

                            <div class="col-md-12" >
                                    <div class="col-md-4">Lesson Title</div>
                                    <div class="col-md-3">Note</div>
                                    <div class="col-md-2">Accessibility</div>
                            </div>
                            <hr style="margin-bottom:0px;padding-bottom:0px;">
                            <div class="panel-body" style="padding:15px;border:none;">
                                <div class="table-responsive" style="margin-bottom:15px;" ng-init="isOpen = false">

                                    <div data-as-sortable="dragControlListeners" data-ng-model="module.lessons" is-disabled="disableSortable.value" style="min-height:20px;" >

                                       <div class="lesson_item row" style="min-height:40px;border-radius: 0px;background-color:#eee;"  data-ng-repeat="lesson in module.lessons" data-as-sortable-item data-component="lesson" data-id="{{lesson.id}}" >
                                            <div style="min-height:40px" class="col-md-12" data-as-sortable-item-handle ng-class="{'disable-sortable':isOpen==true}">
                                                <div class="col-md-4" style=" border-right: 1px dashed #333;">
                                                    <a style="margin:0px;padding:0px;" e-placeholder="Enter Lesson Name" editable-text="lesson.title" onaftersave="updateLesson(lesson , module)">{{ lesson.title || 'Empty'}}</a>
                                                </div>
                                                <div class="col-md-3" style=" border-right: 1px dashed #333;">
                                                    <a e-placeholder="Enter Notes" editable-text="lesson.note" onaftersave="updateLesson(lesson , module)">{{ lesson.note || 'Empty'}}</a>
                                                </div>
                                                <div class="col-md-5" >
                                                    <div class="col-md-3" style=" border-right: 1px dashed #333;">
                                                        <a popover-template="2" popover-toggle="isOpen" class="btn btn-success" popover-placement="left" ng-click="isOpen=true;disableSortable.value = true;" data-html="true">{{lesson.access|| 'public'}}</a>
                                                    </div>
                                                    <div style="float:right" class="col-md-1" url-selector ng-model="lesson" template-url="templates/modals/access_level.html"></div>
                                                    <div class="col-md-1" style="float:right"> 
                                                        <a ng-href="/admin/resource/lesson/{{lesson.id}}" ><i class="fa fa-pencil"></i></a>
                                                    </div>
                                                    <div class="col-md-1" style="float:right">
                                                        <a class="delete_lesson" data-bypass="true" ng-click="deleteLesson(lesson , module)"><i class="fa fa-trash"></i></a>
                                                    </div>
                                                </div>
                                            </div>
                                       </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        </div>
                    </div>


                </div>
                <div class="row" style="line-height: 200%; word-spacing: 5px;">
                    <div class="col-md-12 hpanel animated-panel zoomIn unassigned_lessons module_item closest_component pull-right"
                         data-component="module" data-id="0" style="animation-delay: 0.1s; -webkit-animation-delay: 0.1s;">
                        <div class="panel-heading hbuilt" style="padding-left:35px;padding-right:35px;border:none;">
                            <div class="pull-right">
                                <a class="btn btn-brand btn-xs add_lesson" ng-click="addUnassignedLesson()">add
                                    lesson</a>
                            </div>
                            <h4>Unassigned Lessons</h4>
                        </div>
                        <div class="col-md-12" style="margin-bottom:10px">
                                <div class="col-md-4" >Lesson Title</div>
                                <div class="col-md-3" >Note</div>
                                <div class="col-md-2" >Accessibility</div>
                        </div>
                        <hr style="margin-bottom:0px;padding-bottom:0px;">
                        <div class="panel-body" style="padding:15px;border:none;">
                            <div class="table-responsive">
                                <div data-as-sortable="dragControlListeners" data-ng-model="unassigned_lessons" style="min-height:20px">
                                   <div class="lesson_item row" style="min-height:40px; border-radius: 0px;background-color:#eee;" data-ng-repeat="unassigned_lesson in unassigned_lessons" data-as-sortable-item data-component="lesson" data-id="{{unassigned_lesson.id}}">
                                        <div style="min-height:40px;" class="col-md-12" data-as-sortable-item-handle>
                                            <div class="col-md-4" style=" border-right: 1px dashed #333;">
                                                <a e-placeholder="Enter Lesson Name" editable-text="unassigned_lesson.title"
                                               onaftersave="updateLesson(unassigned_lesson , null)">{{ unassigned_lesson.title ||
                                                'Empty'}}</a>
                                            </div>
                                            <div class="col-md-3" style=" border-right: 1px dashed #333;">
                                                <a e-placeholder="Enter Notes" editable-text="unassigned_lesson.note"
                                               onaftersave="updateLesson(unassigned_lesson , null)">{{ unassigned_lesson.note ||
                                                'Empty' }}</a>
                                            </div>
                                            <div class="col-md-5" >
                                                <div class="col-md-3" style=" border-right: 1px dashed #333;">
                                                    <a popover-template="2" popover-toggle="isOpen" class="btn btn-success" popover-placement="left" ng-click="isOpen=true" data-html="true">{{unassigned_lesson.access || 'public'}}</a>
                                                </div>
                                                <div class="col-md-1" url-selector ng-model="unassigned_lesson" template-url="templates/modals/access_level.html"></div>
                                                 <div class="col-md-1" style="float:right">
                                                    <a ng-href="/admin/resource/lesson/{{unassigned_lesson.id}}" class="pull-right" style="margin-right: 5px;"><i class="fa fa-pencil"></i></a>
                                                </div>
                                                <div class="col-md-1" style="float:right">
                                                    <a class="_lesson pull-right" data-bypass="true" ng-click="deleteLesson(unassigned_lesson , null)"><i class="fa fa-trash"></i></a>
                                                </div>
                                               
                                            </div>

                                        </div>
                                   </div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>

        </div>

    </div>
</div>
