
<div class="wrapper wrapper-content animated fadeInRight">

    <div class="row">
        <div class="col-lg-12">

            <div class="ibox-content page-heading clear_box">
                <div class="p-xs">
                    <div class="row">
                        <div class="col-md-9">
                            <div class="pull-left m-r-md">
                                <i class="fa fa-globe text-branded mid-icon"></i>
                            </div>
                            <h2>{{ template_data.title | translate }}</h2>
                            <span>{{template_data.description}}</span>
                        </div>
                        <div class="col-md-3 text-right">
                            <a ng-href="{{$state.href( template_data.edit_route )}}" class="btn btn-brand btn-large m-t-md">
                                <i class="fa fa-plus"></i>
                                Create new {{template_data.singular}}
                            </a>
							<button disabled title="Tutorial coming soon!" class="btn btn-default m-t-md" type="button">
								<i class="fa fa-question"></i>
							</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="ibox float-e-margins">
                <div class="ibox-content" style="padding-bottom: 70px;">
                    <div class="form-group" ng-if="pagination.total_count > 10 || query || pagination.current_page > 1">
                        <label class="control-label" for="">Search:</label>
                        <input type="text" id="" name="" value="" class="form-control"  ng-model="$parent.query" ng-change="search()" ng-model-options="{debounce: { 'default': 1000, 'blur': 0 } }">
                    </div>
                    <div ng-if="loading" class="sk-spinner sk-spinner-three-bounce">
                        <div class="sk-bounce1"></div>
                        <div class="sk-bounce2"></div>
                        <div class="sk-bounce3"></div>
                    </div>
                    <table class="footable table table-stripped toggle-arrow-tiny" data-page-size="15" ng-if="data.length > 0 && !loading">
                        <thead>
                        <tr>
                            <th data-hide="title">Name</th>
                            <th data-hide="title">Free Access Url</th>
                            <th data-hide="title">Paid Checkout Url</th>
                            <th data-hide="date">Date</th>
                            <th class="text-right" data-sort-ignore="true">Action</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr ng-repeat="next_item in data[ pagination.current_page ]">
                            <td>
                                {{next_item.name}}
                            </td>
                            <td>
                                <input ng-if="site.domain" class="col-md-8 form-control" value="http://{{site.domain}}/sign/up/hash={{next_item.hash}}" />
                                <input ng-if="!site.domain" class="col-md-8 form-control" value="http://{{site.subdomain}}.{{app.domain}}/sign/up/hash={{next_item.hash}}" />
                                <br>
                                <a class="col-md-8 text-center" ng-click="refreshHash(next_item)"><u>Reset</u><i class="fa fa-refresh" style="margin-left:5px;"></i></a>
                            </td>
                            <td>
                                <div style="margin-bottom : 20px" ng-if="stripe_integrated || paypal_integrated">
                                    <input ng-if="site.domain" class="col-md-12 form-control" value="http://{{site.domain}}/checkout/{{next_item.id}}" />
                                    <input ng-if="!site.domain" class="col-md-12 form-control" value="http://{{site.subdomain}}.{{app.domain}}/checkout/{{next_item.id}}" />
                                </div>
                                <div class="input-group" style="margin-bottom : 20px" ng-if="!stripe_integrated && !paypal_integrated">
                                    <a ui-sref="admin.team.integrations.available">Please set up at least one payment integration.</a>
                                </div>
                            </td>
                            <td>
                                {{moment.utc(next_item.created_at).fromNow()}}
                            </td>
                            <td class="text-right">
                                <a href="{{$state.href( template_data.edit_route, {id: next_item.id } )}}" class="btn btn-brand btn-outline btn-sm">
                                    Edit
                                    <i class="fa fa-pencil"></i>
                                </a>
                                <button class="btn btn-danger btn-outline btn-sm ng-scope" ng-click="delete(next_item.id)">
                                    Delete
                                    <i class="fa fa-trash"></i>
                                </button>

                            </td>
                        </tr>

                        </tbody>
                        <tfoot>
                        <tr>
                        </tr>
                        </tfoot>
                    </table>
                    <pagination total-items="pagination.total_count" max-size="5" items-per-page="25" ng-model="pagination.current_page" class="pagination-sm pull-right" boundary-links="true" ng-change="paginate()" previous-text="&lt;" next-text="&gt;" first-text="&laquo;" last-text="&raquo;"></pagination>
                </div>
            </div>
        </div>
    </div>
</div>
