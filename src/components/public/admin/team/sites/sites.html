<div class="ui modal">
	<div class="row animated fadeInRight">
		<div class="col-lg-12">

			<div class="ibox-content page-heading clear_box">
				<div class="p-xs">
					<div class="row">
						<div class="col-md-9">
							<div class="pull-left m-r-md">
								<i class="fa fa-globe text-branded mid-icon"></i>
							</div>
							<h2 class="ui header">My Admin Sites</h2>
							<span>Feel free to edit, view, and administrate them.</span>
						</div>
						<div class="col-md-3 text-right">
							<a class="btn btn-brand btn-large m-t-md" ng-if="(can_create_sites || is_team_primaryOwner) && (site.locked != 1 && site.locked != '1' && current_company.locked != 1 && current_company.locked != '1' ) && !site.max_count_reached " ng-click="smModal.Show('public.admin.team.site')">
								<i class="fa fa-plus"></i>
								Create new site
							</a>
							<button disabled title="Tutorial coming soon!" class="btn btn-default m-t-md" type="button">
								<i class="fa fa-question"></i>
							</button>
						</div>
					</div>
				</div>
			</div>

            <div class="field" ng-if="adminPagination.total_count > 10 || query || adminPagination.current_page > 1">
                <label class="control-label" for="">Search:</label>
                <input type="text" id="" name="" value="" class="form-control"  ng-model="$parent.query" ng-change="search()" ng-model-options="{debounce: { 'default': 1000, 'blur': 0 } }">
            </div>

			<div ng-if='loading' class="sk-spinner sk-spinner-three-bounce">
				<div class="sk-bounce1"></div>
				<div class="sk-bounce2"></div>
				<div class="sk-bounce3"></div>
			</div>

			<div class="ibox" ng-repeat="site in adminSites[adminPagination.current_page] | orderBy:['-total_revenue','-total_members','-total_lessons']">
				<div class="ibox-content">

					<div class="row" ng-if='!loading'>
						<div class="col-md-5">
							<div class="pull-left m-r-sm">
								<a href="//{{site.domain ? site.domain :  site.subdomain + '.' + app.rootDomain }}" ng-if="site.data.site_logo" class="">
									<img src="{{site.data.site_logo}}" style=" max-height: 60px;" class="img-responsive">
								</a>
							</div>
							<div class="pull-left m-t-xs">
								<a href="//{{site.domain ? site.domain :  site.subdomain + '.' + app.rootDomain }}" class="forum-item-title">{{site.name}}</a>
								<div class="forum-sub-title">{{site.domain ? site.domain : site.subdomain + '.' + 'smartmember.com' }}</div>
							</div>

							<div class="clearfix"></div>

						</div>
						<div class="col-md-4 forum-info">
							<div class="row m-t-sm">
								<div class="col-sm-5">
								<span class="views-number">
									{{site.total_revenue | currency:"$":0}}
								</span>
									<div>
										<small>Revenue</small>
									</div>
								</div>
								<div class="col-sm-4">
								<span class="views-number">
									{{site.total_members}}
								</span>
									<div>
										<small>Members</small>
									</div>
								</div>
								<div class="col-sm-3">
								<span class="views-number">
									{{site.total_lessons}}
								</span>
									<div>
										<small>Lessons</small>
									</div>
								</div>
							</div>

						</div>
						<div class="col-md-3 m-t-md">
							<a href="//{{site.domain ? site.domain :  site.subdomain + '.' + 'smartmember.' + (app.rootDomain.indexOf('smartmember') == -1 ? 'com' : app.env)}}/admin/site/dashboard" class="btn btn-brand btn-outline btn-sm">
								<!-- smartmember is the fix for mapped domain, pls do not revert it -->
								Admin
								<i class="fa fa-star"></i>
							</a>

							<a ng-click="smModal.Show('public.admin.team.site',{id: site.id})" ng-if="is_team_member && $parent.is_team_member" class="btn btn-link btn-sm">
								Edit
								<i class="fa fa-pencil"></i>
							</a>
							<a ng-click="deleteSite(site)" ng-if="is_team_member && $parent.is_team_member" class="btn btn-danger btn-outline btn-sm">
								Delete
								<i class="fa fa-trash"></i>
							</a>
						</div>
					</div>

				</div>
			</div>

			<div class="text-right" ng-if='!loading'>
				<pagination total-items="adminPagination.total_count" max-size="5" items-per-page="25" ng-model="adminPagination.current_page" class="pagination-sm" boundary-links="true" ng-change="loadMore()" previous-text="&lt;" next-text="&gt;" first-text="&laquo;" last-text="&raquo;"></pagination>
			</div>

		</div>
	</div>
</div>
