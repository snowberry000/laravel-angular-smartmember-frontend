<div class="ui modal">
    <div class="content">
        <div class="row">
            <div class="col-lg-12">

                <div class="ibox-content clear_box page-heading">
                    <div class="p-xs">
                        <div class="row">
                            <div class="col-md-8">
                                <div class="pull-left m-r-md">
                                    <i class="fa fa-envelope-o text-branded mid-icon"></i>
                                </div>
                                <h2 class="ui header">{{ template_data.title | translate }}</h2>
                                <span>{{template_data.description}}</span>
                            </div>
                            <!-- <div class="col-md-4 text-right">
                                <a ng-click="smModal.Show( template_data.edit_route )" class="btn btn-brand m-t-md btn-large ng-scope">
                                    <i class="fa fa-plus"></i>
                                    Add Subscriber
                                </a>
                                <a ng-click="smModal.Show('public.admin.team.email.export')" class="btn btn-brand m-t-md btn-large ng-scope">
                                    <i class="fa fa-plus"></i>
                                    Export
                                </a>
                                <button disabled title="Tutorial coming soon!" class="btn btn-default m-t-md" type="button">
                                    <i class="fa fa-question"></i>
                                </button>
                            </div> -->
                        </div>
                    </div>
                </div>

            </div>
        </div>
        <div class="row">
            <div class="col-lg-12">

                <div class="ibox">
                    <div class="ibox-content">
                        <div class="field">
                            <input type="text" placeholder="Search subscribers" class="form-control" ng-model="$parent.query" ng-change="search()" ng-model-options="{debounce: { 'default': 1000, 'blur': 0 } }" ng-if="pagination.total_count > 10 || query || pagination.current_page > 1">
                        </div>
                        <div ng-if="loading" class="sk-spinner sk-spinner-three-bounce">
                            <div class="sk-bounce1"></div>
                            <div class="sk-bounce2"></div>
                            <div class="sk-bounce3"></div>
                        </div>

                        <table class="ui fixed single line celled stackable table" data-page-size="6" ng-if="data.length > 0 && !loading" foonice>
                            <thead>
                                <tr>
                                    <th data-toggle="true">Email</th>
                                    <th data-hide="phone">Name</th>
                                    <th data-hide="phone,tablet">Type</th>
                                    <th data-hide="all">Email List(s)</th>
                                    <th data-hide="all">Date</th>
                                    <th class="text-right" data-hide="phone" data-sort-ignore="true">Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="next_item in data[ pagination.current_page ]">
                                    <td class="responsive_table_item">
                                        {{next_item.email}}
                                    </td>
                                    <td style="width: 140px;">
                                        <span ng-if="next_item.name != next_item.email">{{next_item.name ? next_item.name : '&nbsp;'}}</span>
                                    </td>
                                    <td style="width: 175px;">
                                        {{next_item.status == 'Subscriber' && next_item.user ? 'Subscriber/Member' : next_item.status}}
                                    </td>
                                    <td>
                                        <ul ng-if="next_item.email_lists.length > 0">
                                            <li ng-repeat="list in next_item.email_lists">{{list.name}}</li>
                                        </ul>
                                    </td>
                                    <td style="width: 160px;">
                                        {{moment.utc(next_item.created_at).fromNow()}}
                                    </td>
                                    <td class="text-right" style="width: 125px;">
                                        <div class="btn-group">
                                            <a href="{{$state.href( template_data.edit_route, {id: next_item.id } )}}" ng-if="next_item.status == 'Subscriber'" class="btn btn-brand btn-outline btn-xs">
                                                <i class="fa fa-pencil"></i>
                                                Edit
                                            </a>
                                            <button class="btn btn-danger btn-outline btn-xs" ng-if="next_item.status == 'Subscriber'" ng-click="delete(next_item.id)">
                                                Delete
                                                <i class="fa fa-trash"></i>
                                            </button>
                                        </div>
                                    </td>
                                </tr>

                            </tbody>

                        </table>

                        <div class="text-right" ng-if="!loading">
                            <pagination total-items="pagination.total_count" max-size="5" items-per-page="25" ng-model="pagination.current_page" class="pagination-sm" boundary-links="true" ng-change="paginate()" previous-text="&lt;" next-text="&gt;" first-text="&laquo;" last-text="&raquo;"></pagination>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="actions">
        <a ng-click="smModal.Show( template_data.edit_route )" class="ui right labeled icon button">
            Import Subscriber
            <i class="fa fa-plus"></i>
        </a>
        <a ng-click="smModal.Show('public.admin.team.email.export')" class="ui right labeled icon button">
            Export Subscriber
            <i class="fa fa-plus"></i>
        </a>
        <div class="ui black deny button close">
            Close
        </div>
    </div>
</div>
