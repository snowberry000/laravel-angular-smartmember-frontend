
<div class="three wide column the_left_sidebar">

	<div class="header">MANUAL MESSAGES</div>
	<div class="ui selection relaxed large list">
		<a ui-sref="admin.app.messages.manual({segment: 'all-sent'})" class="link {{$stateParams.segment == 'all-sent' ? 'active' : ''}} item">
			<i class="wizard icon"></i>
			<div class="content">
				<div class="header">
					All sent
				</div>
			</div>
		</a>
		<a ui-sref="admin.app.messages.manual({segment: 'all-drafts'})" class="link {{$stateParams.segment == 'all-drafts' ? 'active' : ''}} item">
			<i class="wizard icon"></i>
			<div class="content">
				<div class="header">
					All drafts
				</div>
			</div>
		</a> 
	</div>
</div>
<div class="thirteen wide column">

	<div class="ui active inverted dimmer" ng-if="loading">
		<div class="ui text loader">Loading</div>
	</div>

	<div class="ui basic segment">
		<div class="ui equal width middle aligned grid">
			<div class="column">
				<h2 class="ui inline header">
					<i class="send icon"></i>
					<div class="content">
						{{manual.current_tab}}
						<div class="sub header">({{pagination.total_count}})</div>
					</div>
				</h2>
			</div>
			<div class="right aligned column" ng-if="company.sendgrid && company.sendgrid.api_key">
				<a ng-href="/messages/edit/?auto=false" class="ui red large right labeled icon button">
					New Manual Message
					<i class="plus icon"></i>
				</a>
			</div>
			<div class="right aligned column" ng-if="!company || !company.sendgrid.api_key">
				<h3 class="ui icon header">
					<div class="ui red basic label">
						You need to setup your sendgrid credentials
					</div>
				</h3>
			</div>
		</div>
	</div>
	<div class="ui basic segment">
		<div class="ui fluid container">

			<table class="ui celled small table">
				<thead>
					<tr>
						<th class="five wide">
							Title
						</th>
						<th>
							From
						</th>
						<th>
							Sent
						</th>
						<th>
							Opened
						</th>
						<th>
							Clicked
						</th>
						<!--< th>
							Unsubs
						</th> -->
						<th>
							Last Sent
						</th>
						<!-- <th>
							Type
						</th> -->
						<th>
							Created
						</th>
					</tr>
				</thead>
				<tbody>
					<!-- <tr>
						<td>
							<h4 class="ui header single line m-b-xs">
								<a ui-sref="admin.app.messages.show({id:1})">
									Sample one-time email message
								</a>
							</h4>
							<div class="sub header">
								<i class="user icon"></i> Type is User
								<i class="signal icon"></i> Web sessions has any value
								<i class="at icon"></i> Email has any value
							</div>
						</td>
						<td>
							<a ui-sref="admin.app.member({id:next_item.id})" class="ui small image header">
								<img src="https://secure.gravatar.com/avatar/0?d=mm&s=35" class="ui rounded image">
								<div class="content">
									John Razmus
								</div>
							</a>
						</td>
						<td class="single line">
							<div class="ui large basic blue borderless label">
								<i class="user icon m-r-xs"></i> 120
							</div>
						</td>
						<td class="single line">
							<div class="ui large basic green borderless label">
								<i class="eye icon m-r-xs"></i> 96%
							</div>
						</td>
						<td class="single line">
							<div class="ui large basic pink borderless label">
								<i class="eye icon m-r-xs"></i> 0%
							</div>
						</td>
						<td class="single line">
							<div class="ui large basic red borderless label">
								<i class="eye icon m-r-xs"></i> —
							</div>
						</td>
						<td class="single line">
							<i class="calendar icon"></i> 5 minutes ago
						</td>
						<td class="single line">
							<i class="comment icon"></i> Small Announcement
						</td>
						<td class="single line">
							<i class="calendar icon"></i> 6 hours ago
						</td>
					</tr> -->
					<tr dir-paginate="message in $parent.messages | itemsPerPage:$parent.pagination.per_page" total-items="$parent.pagination.total_count" current-page="$parent.pagination.current_page">
						<td>
							<h4 class="ui header m-b-xs">
								<a ng-href="/messages/show/{{message._id}}?auto=false">
									{{message.name}}
								</a>
								<span class="ui green mini label" ng-if="message.activated">Live</span>
							</h4>
							<div class="sub header">
								{{getFilterMessage(message.filters,message.filters_operand,message.filters_type)}}
							</div>
						</td>
						<td>
							<a ui-sref="admin.app.member({id:message.member_id})" class="ui small image header">
								<img src="https://secure.gravatar.com/avatar/0?d=mm&s=35" class="ui rounded image">
								<div class="content">
									{{message.from_name}}
								</div>
							</a>
						</td>
						<td class="single line">
							<div class="ui large basic blue borderless label">
								<i class="user icon m-r-xs"></i> {{message.delivered || 0}}
							</div>
						</td>
						<td class="single line">
							<div class="ui large basic green borderless label">
								<i class="eye icon m-r-xs"></i> {{percentage(message.open,message.delivered)}}%
							</div>
						</td>
						<td class="single line">
							<div class="ui large basic pink borderless label">
								<i class="eye icon m-r-xs"></i> {{percentage(message.click,message.delivered)}}%
							</div>
						</td>
						<!-- <td class="single line">
							<div class="ui large basic red borderless label">
								<i class="eye icon m-r-xs"></i> —
							</div>
						</td> -->
						<td class="single line">
							<i class="calendar icon"></i> {{moment.unix(message.last_sent_at.sec).fromNow()}}
						</td>
						<!-- <td class="single line">
							<i class="comment icon"></i> Small Announcement
						</td> -->
						<td class="single line">
							<i class="calendar icon"></i> {{moment.unix(message.created_at.sec).fromNow()}}
						</td>
					</tr>
				</tbody>
				<tfoot>
					<tr>
						<th colspan="20">
							<div class="ui pointing label">
								{{$parent.pagination.total_count}} items
							</div>
							<dir-pagination-controls max-size="5"></dir-pagination-controls>
						</th>
					</tr>
				</tfoot>
			</table>
		</div>
	</div>

</div>



